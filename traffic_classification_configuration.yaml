# traffic_classification_configuration.yaml

# ============================================================================
# DATA LOADING & PREPROCESSING
# ============================================================================
data:
  # Path to the input CSV file. This will be overridden by the --data argument in the script.
  path: "01_Data/02_Processed/combined_user_datasets.csv"
  # Directory to save results and outputs
  output_dir: "outputs"
  # List of columns to remove from the dataset
  columns_to_drop:
    - "Flow ID"
    - " Source IP"
    - " Destination IP"
    - " Timestamp"
    - "SimillarHTTP"
    - " Inbound"
    - " External IP"
  # Name of the label column in the raw data
  label_col: "Label"
  # List of values to be considered as 'benign' or 'normal' traffic
  benign_values: [0, "BENIGN", "benign", "Normal", "normal"]
  # Threshold for dropping rows with a high percentage of missing values
  missing_threshold: 0.3
  # Proportion of the dataset to allocate to the test set
  test_size: 0.2
  # Proportion of the dataset to allocate to the validation set (from the training set)
  validation_size: 0.2
  # Random seed for reproducibility
  random_state: 42

# ============================================================================
# MODEL ARCHITECTURE
# ============================================================================
model:
  # Dropout rate for the model's layers
  dropout_rate: 0.2
  # Number of heads in the multi-head attention layer
  attention_heads: 4
  # Number of output classes (binary: benign/attack)
  num_classes: 2

# ============================================================================
# MODEL TRAINING
# ============================================================================
training:
  # Number of training epochs
  num_epochs: 15
  # Batch size for training and evaluation
  batch_size: 256
  # Learning rate for the Adam optimizer
  learning_rate: 0.001
  # Gamma parameter for the WeightedFocalLoss
  focal_gamma: 2.0
  # Number of epochs to wait for improvement before early stopping
  early_stopping_patience: 10
  # Device to use for training ('cuda' or 'cpu')
  device: 'auto' # 'auto' will detect and use CUDA if available

# ============================================================================
# EVALUATION
# ============================================================================
evaluation:
  # Target detection rate (True Positive Rate) for threshold tuning
  target_detection_rate: 0.95
  # Target False Positive Rate for threshold tuning
  target_fpr: 0.02

# ============================================================================
# FEATURE ENGINEERING
# ============================================================================
features:
  # Enable or disable feature engineering phases
  temporal_features_enabled: true
  invariance_features_enabled: true
  domain_features_enabled: true

  # Parameters for temporal features
  temporal:
    # Quantile for defining a 'burst'
    burst_quantile: 0.75

  # Parameters for invariance features
  invariance:
    # Number of columns to use for rank features
    rank_feature_columns: 3

  # Parameters for domain-specific features
  domain:
    # Quantile for defining 'high activity'
    high_activity_quantile: 0.9
    # Quantile for defining 'low activity'
    low_activity_quantile: 0.1
